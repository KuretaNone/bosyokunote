---
id: AHKでHHKBのキーマップを作成する
aliases:
  - AHKでHHKBのキーマップを作成する
tags: []
created: 2025-09-20
updated: 2025-09-20
---

# AHKでHHKBのキーマップを作成する

> [!CAUTION]
> 追記で話ますが、結局上手く動作しないため、ノートPCでも[[HHKB]]でも使用するため 
> 打ち箸というもの購入しました。この試みは失敗というわけです。

## はじめに
こんにちは。[[暮田のん]]です。

皆さんは[[HHKB]]をしっていますか？
知らないという方は、プログラマ向けの高級キーボードであることだけ認識してもらえたらいいです。

- [[HHKB]]高級
- [[AHK]]は無料

- だったらAHKでHHKBを再現すれば無料で高級キーボードと同じ体験ができるじゃないか！
- 学生はうれしいよね。
- 最初はお金をかけるべきではない
- 中古で買って体に会わなかったら中古でうればいいという意見もある。リセールがよい商品なのであり


個人的には以下の2点を重視してやっていこうと思います。

1. AHKのみで完結すること(レジストリの書き換えは再起動が必要なのでなし)
2. 無料でできること

ちなみに私自身はHHKBを持っています。
[[2025-09-15 TUF Gaming A14 を購入]]をきっかけに作業環境を外に持ち出すことができるようになりました。
しかし、自宅では依然として、[[HHKB]]を使用し続けます。
つまり、備え付けのキーボードを使用してる時だけAHKスクリプトを読み込ませて、HHKB配列を使用できるようにしたいということです。

> [!NOTE]
> [[尊師スタイル]]というのが世の中にはあります。
> そして[[HHKB]]にはその尊師スタイルをサポートするアイテム[[Typesticks]]という製品があります。
> HHKBを持っているのであればこれを使えばいいのではないかという意見があるともいます。
> もちろんその通りなんですが、せっかくの携帯性に優れるノートPCのためにキーボードを持ち運ぶのはちょっとナンセンスだとは思いませんか？

## 使用環境

- Windows11
- Microsoft IME
- AHK V2
- JIS配列


## 素直にやっても上手く行きません
なので同じことをやりたい人はみんなレジストリを書き換えてます。
でも私の場合はレジストリを書き換えたらHHKB接続時に支障がでます。

そのため[[PowerToys]]の[[Keyboard Manager]]を使用します。
こちらではトグル1つで有効と無効を切り替えることができるのでこちらを採用します。

当初の目標であった[[AHK]]1つで環境を構築することはできませんが、レジストリを書き換えるよりは幾分かましな手段でしょう。

(Macの[[Karabiner-Elements]]はたしか変更するキーボードを指定できたようなきがするなぁ)

slockをctrl
全角・半角をescに変更

## ahkで内臓キーボードのときだけ有効になるように判定をする

- Windows11
- MS IME
- AHK V2
- JIS配列

## 書き換えたいキー一覧

| 置換前     | 置換後  |
| :---       | :---    |
| CapsLock   | Ctrl    |
| 半角・全角 | ESC     |
| 無変換     | F13     |
| 変換       | IME OFF |

## Fｍキーの組み合わせ
※ここでいうFnは無変換キーのこと。
AHKでF13との組み合わせで 以下のショートを作成して

| ショートカットキー | 効果        |
| :---               | :---        |
| Fn + HJKL          | 矢印キー    |
| Fn + P             | PrintScrean |
| Fn + O             | Enter       |
| Fn + I             | Space       |
| Fn + U             | BS          |
| Fn + Y             | Del         |
| Fn + 数字          | Fn1~F12     |
| Fn + IME off       | IME ON | 
| Fn + Space | ALT|


## CapsLockをCtrlに変更

JISキーボードを使用して、[[AHK]]からCapsLockをCtrlを単に入れ替えるだけでは正常に動作しません。
なぜならCapsLockにはIMEのON / OFF が割り当てられているからです。

今回はこちらを[[Keybord Manegaer]]で画像のように入れ替えます。

![[20250930005051.png]]

本音をいえばこの問題をAHKのスクリプトで解決してほしい

## 全角・半角をescに変更

左上の全角・半角キーをescに変換します。
こちらも同様に押しっぱなしなる問題があるようで、[[AHK]]単体では解決が難しい問題となっています。

## その他のキー

無変換はF13に、変換はIMEOFFに割り当てます。
これはHHKBの標準の配列ではなく自分が使いやすいキーマップです
Fnキーの組み合わせは大体全部自分用です。


## 2025-10-26 結局外でもHHKBを使うことにしたよ。

結局変換キーをレイヤキーとして動作させることと[[Keybord Manager]]は上手く動作しまんでした。
`Ctrl` や `Shift` 等の装飾キーがおしっぱになる問題について解決することができなかったからです。

あと、キーマップが一緒でも結局[[HHKB]]本体のほうが打ち心地は最高だし、動作は安定しているので
持ち運ぶ荷物が増えることを許容しました。

## 参考

